import{b9 as e,d as a,r as t,S as l,o as s,b8 as i,c as r,e as n,l as o,Y as p,w as m,g as d,X as u,a1 as c,W as f,m as g,aQ as h,Z as j,ay as _,aH as v,$ as b,a0 as y}from"./index.DFlZ7dGX.js";import{v as w}from"./el-loading.BOBKTW-k.js";import{E as k}from"./el-card.Dj7EVyEg.js";import{_ as x}from"./index.DwHzaXmp.js";import{E as C,a as E}from"./el-table-column.DgIaeydT.js";import"./el-checkbox.Cb3CS4F9.js";import"./el-tooltip.l0sNRNKZ.js";import"./el-scrollbar.BqHqCfk1.js";/* empty css               */import{E as S}from"./el-avatar.yjiseS3-.js";import{_ as U}from"./delete.FdViYtDV.js";import{E as z,a as A}from"./el-form.C0ylLLBZ.js";import{_ as N,a as T}from"./search.CUGE_fnb.js";import"./el-form-item.l0sNRNKZ.js";import{E as V}from"./index.BYRgmhlv.js";import"./el-select.U5XiPPVH.js";import"./strings.Crw7MV9D.js";import"./isEqual.BQua4RH1.js";import"./_initCloneObject.CKZeNbwV.js";import"./_baseIteratee.Cz-MSM4w.js";import"./index.UFisVe2j.js";import"./castArray.BOetU48W.js";import"./_plugin-vue_export-helper.BCo6x5W8.js";import"./isUndefined.DgmxjSXK.js";const q={class:"app-container"},B={class:"search-container"},F=a({name:"AdminLog",inheritAttrs:!1,__name:"message",setup(a){const F=t(!1),P=t([]),R=t(0),D=t(z),H=l({pageNo:1,pageSize:10}),O=t();function W(){F.value=!0,function(a){return e({url:"/system/message/list",method:"get",params:a})}(H).then((({data:e})=>{O.value=e.records,R.value=e.total})).finally((()=>{F.value=!1}))}function I(){D.value.resetFields(),H.pageNo=1,W()}function J(e){P.value=e.map((e=>e.id))}function K(a){const l=t([]);a&&l.value.push(a),P.value.length&&(l.value=P.value),l?v.confirm("确认删除已选中的数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{var a;F.value=!0,(a=l.value,e({url:"/system/message/delete",method:"delete",data:a})).then((()=>{_.success("删除成功"),W()})).finally((()=>F.value=!1))})):_.warning("请勾选删除项")}return s((()=>{W()})),(e,a)=>{const t=b,l=A,s=N,_=y,v=T,L=z,Q=U,X=C,Y=S,Z=V,$=E,G=x,M=k,ee=i("hasPerm"),ae=w;return r(),n("div",q,[o("div",B,[p(L,{ref_key:"queryFormRef",ref:D,model:d(H),inline:!0},{default:m((()=>[p(l,{prop:"name",label:"用户名称"},{default:m((()=>[p(t,{modelValue:d(H).name,"onUpdate:modelValue":a[0]||(a[0]=e=>d(H).name=e),placeholder:"用户名称",clearable:"",onKeyup:u(W,["enter"])},null,8,["modelValue"])])),_:1}),p(l,null,{default:m((()=>[p(_,{type:"primary",onClick:W},{default:m((()=>[p(s),c("搜索")])),_:1}),p(_,{onClick:I},{default:m((()=>[p(v),c("重置")])),_:1})])),_:1})])),_:1},8,["model"])]),p(M,{shadow:"never",class:"table-container"},{header:m((()=>[f((r(),g(_,{type:"danger",disabled:0===d(P).length,onClick:K},{default:m((()=>[p(Q),c("批量删除")])),_:1},8,["disabled"])),[[ee,["system:message:delete"]]])])),default:m((()=>[f((r(),g($,{ref:"dataTableRef",data:d(O),"highlight-current-row":"",stripe:"",fit:"","max-height":"600px",onSelectionChange:J},{default:m((()=>[p(X,{type:"selection",align:"center"}),p(X,{prop:"avatar",align:"center",width:"100",label:"头像"},{default:m((e=>[p(Y,{shape:"square",size:50,src:e.row.avatar},null,8,["src"])])),_:1}),p(X,{prop:"nickname",align:"center",width:"100",label:"昵称"}),p(X,{prop:"content",align:"center",width:"300",label:"内容"}),p(X,{prop:"ipAddress",align:"center",width:"150",label:"ip地址"}),p(X,{prop:"ipSource",align:"center",width:"200",label:"ip来源"}),p(X,{prop:"status",align:"center",width:"180",label:"状态"},{default:m((e=>[1===e.row.status?(r(),g(Z,{key:0,type:"success"},{default:m((()=>[c("正常")])),_:1})):(r(),g(Z,{key:1,type:"info"},{default:m((()=>[c("审核中")])),_:1}))])),_:1}),p(X,{prop:"createTime",align:"center",label:"留言时间"}),p(X,{align:"center",label:"操作",width:"160","class-name":"small-padding fixed-width"},{default:m((e=>[f((r(),g(_,{link:"",type:"danger",onClick:a=>K(e.row.id),size:"small",icon:"Delete"},{default:m((()=>[c("删除")])),_:2},1032,["onClick"])),[[ee,["system:message:delete"]]])])),_:1})])),_:1},8,["data"])),[[ae,d(F)]]),d(R)>0?(r(),g(G,{key:0,total:d(R),"onUpdate:total":a[1]||(a[1]=e=>h(R)?R.value=e:null),page:d(H).pageNo,"onUpdate:page":a[2]||(a[2]=e=>d(H).pageNo=e),limit:d(H).pageSize,"onUpdate:limit":a[3]||(a[3]=e=>d(H).pageSize=e),onPagination:W},null,8,["total","page","limit"])):j("",!0)])),_:1})])}}});export{F as default};
