import{b9 as e,d as a,r as l,S as t,o as r,b8 as o,c as s,e as i,l as n,Y as u,w as d,g as m,X as p,L as f,M as c,m as g,a1 as b,W as _,Z as h,t as v,aQ as y,ay as V,aH as k,$ as j,a0 as w}from"./index.fnbw5y5k.js";import{v as x}from"./el-loading.HzdahNM-.js";import{E as C}from"./el-card.Q-ANbuzj.js";import{E as U}from"./el-dialog.BEFVEy0C.js";import{E}from"./el-input-number.DL1IkvrW.js";import{_ as q}from"./index.C4t10Dr8.js";import{E as L,a as z}from"./el-table-column.DFP7xguF.js";import"./el-checkbox.BXgtrOQn.js";import"./el-tooltip.l0sNRNKZ.js";import"./el-scrollbar.BK4RbwYQ.js";/* empty css               */import{E as T}from"./el-link.Go76NEay.js";import{_ as F}from"./delete.H061f9X9.js";import{_ as N}from"./plus.Ua7SYhU2.js";import{E as S,a as R}from"./el-form.CXzYbvvU.js";import{_ as A,a as B}from"./search.B3udlEv0.js";import{E as O,a as P}from"./el-select.iwXnlUdR.js";import"./el-form-item.l0sNRNKZ.js";import{E as D}from"./index.BWcfXwkj.js";import{_ as H}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./refs.VcmB5KbP.js";import"./isUndefined.DgmxjSXK.js";import"./index.Baqcc7Ax.js";import"./isEqual.A87rRtZ6.js";import"./_initCloneObject.CCC-Ul-V.js";import"./_baseIteratee.CiruAMh1.js";import"./index.DaE7Pgd4.js";import"./castArray.BfXkOhWC.js";import"./strings.CNQDdpYl.js";const I={class:"app-container"},M={class:"search-container"},W=["src"],X=H(a({name:"FriendLink",inheritAttrs:!1,__name:"friendLink",setup(a){const H=l(S),X=t({avatar:[{required:!0,message:"网站头像不能为空",trigger:"blur"}],name:[{required:!0,message:"网站名称不能为空",trigger:"blur"},{min:1,max:20,message:"长度在1到20个字符"}],url:[{required:!0,message:"网站地址不能为空",trigger:"blur"},{pattern:/^((https|http|ftp|rtsp|mms)?:\/\/)[^\s]+/,message:"请输入有效的网站地址"}],info:[{required:!0,message:"网站简介不能为空",trigger:"blur"}],status:[{required:!0,message:"网站状态不能为空",trigger:"blur"}],reason:[{required:!0,message:"下架原因不能为空",trigger:"blur"}],sort:[{required:!0,message:"排序字段不能为空",trigger:"blur"},{pattern:/^[0-9]\d*$/,message:"排序字段只能为自然数"}]}),$=t({title:"",visible:!1}),J=t({name:"",info:"",url:"",avatar:"",status:1,sort:1,id:""}),K=l(!1),Q=l(0),Y=l([]),Z=l(["下架","申请","上架"]),G=l(["warning","danger","success"]),ee=l(S),ae=t({pageNo:1,pageSize:10}),le=l();function te(){K.value=!0,function(a){return e({url:"/system/friend/list",method:"get",params:a})}(ae).then((({data:e})=>{le.value=e.records,Q.value=e.total})).finally((()=>{K.value=!1}))}function re(){ee.value.resetFields(),ae.pageNo=1,te()}function oe(){$.visible=!1,H.value.resetFields(),H.value.clearValidate(),J.id="",J.name="",J.info="",J.url="",J.avatar="",J.email="",J.status=1,J.sort=1,J.reason=""}function se(e){$.visible=!0,e?($.title="修改友链",Object.assign(J,e)):$.title="新增友链"}function ie(){H.value.validate((a=>{if(a){K.value=!0;J.id?(l=J,e({url:"/system/friend/update",method:"put",data:l})).then((()=>{V.success("修改成功"),oe(),re()})).finally((()=>K.value=!1)):function(a){return e({url:"/system/friend/add",method:"post",data:a})}(J).then((()=>{V.success("新增成功"),oe(),re()})).finally((()=>K.value=!1))}var l}))}function ne(a){var l;(l=a.id,e({url:"/system/friend/top",method:"get",params:{id:l}})).then((()=>{V.success("置顶成功"),te()}))}function ue(a){const t=l([]);a&&t.value.push(a),Y.value.length&&(t.value=Y.value),t?k.confirm("确认删除已选中的数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{var a;K.value=!0,(a=t.value,e({url:"/system/friend/delete",method:"delete",data:a})).then((()=>{V.success("操作成功"),te()})).finally((()=>K.value=!1))})):V.warning("请勾选删除项")}function de(e){Y.value=e.map((e=>e.id))}return r((()=>{te()})),(e,a)=>{const l=j,t=R,r=O,V=P,k=A,me=w,pe=B,fe=S,ce=N,ge=F,be=L,_e=T,he=D,ve=z,ye=q,Ve=E,ke=U,je=C,we=o("hasPerm"),xe=x;return s(),i("div",I,[n("div",M,[u(fe,{ref_key:"queryFormRef",ref:ee,model:m(ae),inline:!0},{default:d((()=>[u(t,{label:"友链名称",prop:"name"},{default:d((()=>[u(l,{modelValue:m(ae).name,"onUpdate:modelValue":a[0]||(a[0]=e=>m(ae).name=e),placeholder:"请输入友链名称",clearable:"",onKeyup:p(te,["enter"])},null,8,["modelValue"])])),_:1}),u(t,{label:"友链状态",prop:"status"},{default:d((()=>[u(V,{onChange:te,modelValue:m(ae).status,"onUpdate:modelValue":a[1]||(a[1]=e=>m(ae).status=e),style:{width:"200px"},placeholder:"请选择友链状态",clearable:""},{default:d((()=>[(s(!0),i(f,null,c(m(Z),((e,a)=>(s(),g(r,{key:a,label:e,value:a},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),u(t,null,{default:d((()=>[u(me,{type:"primary",onClick:te},{default:d((()=>[u(k),b("搜索")])),_:1}),u(me,{onClick:re},{default:d((()=>[u(pe),b("重置")])),_:1})])),_:1})])),_:1},8,["model"])]),u(je,{shadow:"never",class:"table-container"},{header:d((()=>[_((s(),g(me,{type:"success",onClick:a[2]||(a[2]=e=>se())},{default:d((()=>[u(ce),b("新增")])),_:1})),[[we,["system:friendLink:add"]]]),_((s(),g(me,{type:"danger",disabled:0===m(Y).length,onClick:ue},{default:d((()=>[u(ge),b("批量删除")])),_:1},8,["disabled"])),[[we,["system:friendLink:delete"]]])])),default:d((()=>[_((s(),g(ve,{ref:"dataTableRef",data:m(le),"highlight-current-row":"",stripe:"",fit:"",onSelectionChange:de,"max-height":"600px"},{default:d((()=>[u(be,{type:"selection",align:"center"}),u(be,{label:"网站图标",width:"120",align:"center"},{default:d((e=>[e.row.avatar?(s(),i("img",{key:0,src:[e.row.avatar],style:{width:"50px",height:"50px"}},null,8,W)):h("",!0)])),_:1}),u(be,{prop:"name",align:"center",label:"网站名称",width:"200"}),u(be,{prop:"info",align:"center",width:"200",label:"网站描述"}),u(be,{align:"center",width:"350",label:"网站地址"},{default:d((e=>[u(_e,{underline:!1,href:e.row.url,target:"_blank"},{default:d((()=>[b(v(e.row.url),1)])),_:2},1032,["href"])])),_:1}),u(be,{align:"center",prop:"status",label:"状态"},{default:d((e=>[n("span",null,[u(he,{type:m(G)[e.row.status]},{default:d((()=>[b(v(m(Z)[e.row.status]),1)])),_:2},1032,["type"])])])),_:1}),u(be,{align:"center",prop:"sort",sortable:"",label:"排序"},{default:d((e=>[n("span",null,[u(he,{type:"warning"},{default:d((()=>[b(v(e.row.sort),1)])),_:2},1024)])])),_:1}),u(be,{align:"center",prop:"createTime",width:"200",label:"创建时间"},{default:d((e=>[n("span",null,v(e.row.createTime),1)])),_:1}),u(be,{align:"center",label:"操作",width:"230","class-name":"small-padding fixed-width"},{default:d((e=>[_((s(),g(me,{onClick:a=>ne(e.row),type:"info",size:"small",link:"",icon:"Top"},{default:d((()=>[b("置顶 ")])),_:2},1032,["onClick"])),[[we,["system:friendLink:top"]]]),_((s(),g(me,{onClick:a=>se(e.row),type:"primary",size:"small",link:"",icon:"Edit"},{default:d((()=>[b("编辑 ")])),_:2},1032,["onClick"])),[[we,["system:friendLink:update"]]]),_((s(),g(me,{type:"danger",link:"",onClick:a=>ue(e.row.id),size:"small",icon:"Delete"},{default:d((()=>[b("删除")])),_:2},1032,["onClick"])),[[we,["system:friendLink:delete"]]])])),_:1})])),_:1},8,["data"])),[[xe,m(K)]]),m(Q)>0?(s(),g(ye,{key:0,total:m(Q),"onUpdate:total":a[3]||(a[3]=e=>y(Q)?Q.value=e:null),page:m(ae).pageNo,"onUpdate:page":a[4]||(a[4]=e=>m(ae).pageNo=e),limit:m(ae).pageSize,"onUpdate:limit":a[5]||(a[5]=e=>m(ae).pageSize=e),onPagination:te},null,8,["total","page","limit"])):h("",!0),u(ke,{title:m($).title,modelValue:m($).visible,"onUpdate:modelValue":a[15]||(a[15]=e=>m($).visible=e),width:"800px","append-to-body":"",onClose:oe},{footer:d((()=>[u(me,{onClick:a[14]||(a[14]=e=>m($).visible=!1)},{default:d((()=>[b("取 消")])),_:1}),u(me,{type:"primary",onClick:ie},{default:d((()=>[b("确 定")])),_:1})])),default:d((()=>[u(fe,{ref_key:"formRef",ref:H,model:m(J),rules:m(X),"label-width":"120px"},{default:d((()=>[u(t,{label:"网站头像",prop:"avatar"},{default:d((()=>[u(l,{modelValue:m(J).avatar,"onUpdate:modelValue":a[6]||(a[6]=e=>m(J).avatar=e),"auto-complete":"off"},null,8,["modelValue"])])),_:1}),u(t,{label:"网站名称",prop:"name"},{default:d((()=>[u(l,{modelValue:m(J).name,"onUpdate:modelValue":a[7]||(a[7]=e=>m(J).name=e),"auto-complete":"off"},null,8,["modelValue"])])),_:1}),u(t,{label:"网站简介",prop:"info"},{default:d((()=>[u(l,{modelValue:m(J).info,"onUpdate:modelValue":a[8]||(a[8]=e=>m(J).info=e),"auto-complete":"off"},null,8,["modelValue"])])),_:1}),u(t,{label:"网站地址",prop:"url"},{default:d((()=>[u(l,{modelValue:m(J).url,"onUpdate:modelValue":a[9]||(a[9]=e=>m(J).url=e),"auto-complete":"off"},null,8,["modelValue"])])),_:1}),u(t,{label:"站长邮箱",prop:"email"},{default:d((()=>[u(l,{modelValue:m(J).email,"onUpdate:modelValue":a[10]||(a[10]=e=>m(J).email=e),"auto-complete":"off"},null,8,["modelValue"])])),_:1}),u(t,{label:"网站状态",prop:"status"},{default:d((()=>[u(V,{modelValue:m(J).status,"onUpdate:modelValue":a[11]||(a[11]=e=>m(J).status=e),placeholder:"请选择"},{default:d((()=>[(s(!0),i(f,null,c(m(Z),((e,a)=>(s(),g(r,{key:a,label:e,value:a},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),0===m(J).status?(s(),g(t,{key:0,label:"下架原因",prop:"reason"},{default:d((()=>[u(l,{modelValue:m(J).reason,"onUpdate:modelValue":a[12]||(a[12]=e=>m(J).reason=e),"auto-complete":"off"},null,8,["modelValue"])])),_:1})):h("",!0),u(t,{label:"排序",prop:"sort"},{default:d((()=>[u(Ve,{modelValue:m(J).sort,"onUpdate:modelValue":a[13]||(a[13]=e=>m(J).sort=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["title","modelValue"])])),_:1})])}}}),[["__scopeId","data-v-743f8e6f"]]);export{X as default};
