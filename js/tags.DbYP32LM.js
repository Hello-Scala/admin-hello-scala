import{d as e,r as a,S as l,o as t,b8 as s,c as i,e as o,l as r,Y as n,w as m,g as d,X as u,a1 as p,W as c,m as f,aQ as g,Z as j,ay as v,aH as h,$ as _,a0 as b}from"./index.Cerb1JT_.js";import{v as y}from"./el-loading.WUTUhX0o.js";import{E as x}from"./el-dialog.DHSTe1U-.js";import{E as k}from"./el-input-number.D7wV3gmN.js";import{E as C}from"./el-card.BgJbjUW1.js";import{_ as V}from"./index.CYsYo4Nw.js";import{E as w,a as U}from"./el-table-column.DwFITd1F.js";import"./el-checkbox.BYCK7S1X.js";import"./el-tooltip.l0sNRNKZ.js";import"./el-scrollbar.C_341Wlm.js";import{_ as z}from"./edit.CDumLr4k.js";/* empty css               */import{_ as E}from"./delete.DtW9k9Hx.js";import{_ as T}from"./plus.DptxHhvJ.js";import{E as F,a as N}from"./el-form.BoZSp_1s.js";import{_ as S,a as q}from"./search.Dbdcl_7D.js";import"./el-form-item.l0sNRNKZ.js";import{g as R,u as A,a as B,d as O}from"./index.D79InUdX.js";import"./refs.BUsieLw9.js";import"./isUndefined.DgmxjSXK.js";import"./index.IaD2_l8S.js";import"./el-select.CKtXxozA.js";import"./index.C7WfCkDZ.js";import"./strings.ncVwJ7tQ.js";import"./isEqual.C2oonQXY.js";import"./_initCloneObject.llE26Sy2.js";import"./_baseIteratee.BbUwKPF3.js";import"./index.CD6W8AiQ.js";import"./castArray.dOKKTcPz.js";import"./_plugin-vue_export-helper.BCo6x5W8.js";const P={class:"app-container"},H={class:"search-container"},W={class:"dialog-footer"},D=e({name:"Tag",inheritAttrs:!1,__name:"tags",setup(e){const D=a(F),I=a(F),J=a(!1),K=a([]),M=a(0),Q=l({pageNo:1,pageSize:10}),X=a(),Y=l({title:"",visible:!1}),Z=l({id:"",name:"",sort:1}),$=l({name:[{required:!0,message:"请输入标签名称",trigger:"blur"}],sort:[{required:!0,message:"请选择排序",trigger:"blur"}]});function G(){J.value=!0,R(Q).then((({data:e})=>{X.value=e.records,M.value=e.total})).finally((()=>{J.value=!1}))}function L(){D.value.resetFields(),Q.pageNo=1,G()}function ee(e){K.value=e.map((e=>e.id))}function ae(e){Y.visible=!0,e?(Y.title="修改标签",Object.assign(Z,e)):Y.title="新增标签"}function le(){I.value.validate((e=>{if(e){J.value=!0;Z.id?A(Z).then((()=>{v.success("修改成功"),te(),L()})).finally((()=>J.value=!1)):B(Z).then((()=>{v.success("新增成功"),te(),L()})).finally((()=>J.value=!1))}}))}function te(){Y.visible=!1,I.value.resetFields(),I.value.clearValidate(),Z.id="",Z.name="",Z.sort=1}function se(e){const l=a([]);e&&l.value.push(e),K.value.length&&(l.value=K.value),l?h.confirm("确认删除已选中的数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{J.value=!0,O(l.value).then((()=>{v.success("删除成功"),L()})).finally((()=>J.value=!1))})):v.warning("请勾选删除项")}const ie=e=>{Z.sort=e};return t((()=>{G()})),(e,a)=>{const l=_,t=N,v=S,h=b,R=q,A=F,B=T,O=E,oe=w,re=z,ne=U,me=V,de=C,ue=k,pe=x,ce=s("hasPerm"),fe=y;return i(),o("div",P,[r("div",H,[n(A,{ref_key:"queryFormRef",ref:D,model:d(Q),inline:!0},{default:m((()=>[n(t,{prop:"name",label:"标签名"},{default:m((()=>[n(l,{modelValue:d(Q).name,"onUpdate:modelValue":a[0]||(a[0]=e=>d(Q).name=e),placeholder:"标签名称",clearable:"",onKeyup:u(G,["enter"])},null,8,["modelValue"])])),_:1}),n(t,null,{default:m((()=>[n(h,{type:"primary",onClick:G},{default:m((()=>[n(v),p("搜索")])),_:1}),n(h,{onClick:L},{default:m((()=>[n(R),p("重置")])),_:1})])),_:1})])),_:1},8,["model"])]),n(de,{shadow:"never",class:"table-container"},{header:m((()=>[c((i(),f(h,{type:"success",onClick:a[1]||(a[1]=e=>ae())},{default:m((()=>[n(B),p("新增")])),_:1})),[[ce,["system:tags:add"]]]),c((i(),f(h,{type:"danger",disabled:0===d(K).length,onClick:a[2]||(a[2]=e=>se())},{default:m((()=>[n(O),p("批量删除")])),_:1},8,["disabled"])),[[ce,["system:tags:delete"]]])])),default:m((()=>[c((i(),f(ne,{ref:"dataTableRef",data:d(X),"highlight-current-row":"",stripe:"",fit:"","max-height":"600px",onSelectionChange:ee},{default:m((()=>[n(oe,{type:"selection",width:"55",align:"center"}),n(oe,{label:"标签名",align:"center",prop:"name"}),n(oe,{label:"文章量",align:"center",prop:"articleCount"}),n(oe,{label:"排序",align:"center",prop:"sort"}),n(oe,{label:"创建时间",align:"center",prop:"createTime"}),n(oe,{fixed:"right",align:"center",label:"操作",width:"220"},{default:m((e=>[c((i(),f(h,{type:"primary",size:"small",link:"",onClick:a=>ae(e.row)},{default:m((()=>[n(re),p("编辑 ")])),_:2},1032,["onClick"])),[[ce,["system:tags:update"]]]),c((i(),f(h,{type:"danger",link:"",size:"small",onClick:a=>se(e.row.id)},{default:m((()=>[n(O),p("删除 ")])),_:2},1032,["onClick"])),[[ce,["system:tags:delete"]]])])),_:1})])),_:1},8,["data"])),[[fe,d(J)]]),d(M)>0?(i(),f(me,{key:0,total:d(M),"onUpdate:total":a[3]||(a[3]=e=>g(M)?M.value=e:null),page:d(Q).pageNo,"onUpdate:page":a[4]||(a[4]=e=>d(Q).pageNo=e),limit:d(Q).pageSize,"onUpdate:limit":a[5]||(a[5]=e=>d(Q).pageSize=e),onPagination:G},null,8,["total","page","limit"])):j("",!0)])),_:1}),n(pe,{modelValue:d(Y).visible,"onUpdate:modelValue":a[8]||(a[8]=e=>d(Y).visible=e),title:d(Y).title,width:"500px",onClose:te},{footer:m((()=>[r("div",W,[n(h,{type:"primary",onClick:le},{default:m((()=>[p("确 定")])),_:1}),n(h,{onClick:te},{default:m((()=>[p("取 消")])),_:1})])])),default:m((()=>[n(A,{ref_key:"tagFormRef",ref:I,model:d(Z),rules:d($),"label-width":"100px"},{default:m((()=>[n(t,{label:"标签名",prop:"name"},{default:m((()=>[n(l,{modelValue:d(Z).name,"onUpdate:modelValue":a[6]||(a[6]=e=>d(Z).name=e),placeholder:"请输入标签名称"},null,8,["modelValue"])])),_:1}),n(t,{label:"排序",prop:"sort"},{default:m((()=>[n(ue,{modelValue:d(Z).sort,"onUpdate:modelValue":a[7]||(a[7]=e=>d(Z).sort=e),min:1,max:10,onChange:ie},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])])}}});export{D as default};
