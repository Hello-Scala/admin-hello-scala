import{b9 as e,d as a,r as t,S as l,o as i,b8 as o,c as n,e as r,Y as s,w as p,W as m,m as d,g as u,a1 as c,aQ as g,Z as f,l as h,t as j,ay as v,aH as b,a0 as x}from"./index.V7TsgTEq.js";import{v as w}from"./el-loading.CUKFIxyY.js";import{E as _}from"./el-card.BJ4uZ2ka.js";import{E as y}from"./el-dialog.BeGVJrgV.js";import{a as k}from"./el-scrollbar.Dfe8YXkA.js";import{_ as S}from"./index.DDhQ4iwa.js";import{E as U,a as z}from"./el-table-column.BFVhfB4m.js";import"./el-checkbox.CWpy68J6.js";import"./el-tooltip.l0sNRNKZ.js";/* empty css               */import{_ as C}from"./delete.BIGVJTzd.js";import"./refs.acExKAza.js";import"./isUndefined.DgmxjSXK.js";import"./el-select.C7IgsXi3.js";import"./index.CoRC1ks8.js";import"./strings.Bv4Mk_5L.js";import"./isEqual.D_Din47F.js";import"./_initCloneObject.BGweDbMt.js";import"./_baseIteratee.Br-040dN.js";import"./index.Dr-8d26T.js";import"./castArray.BrIbwm_9.js";import"./_plugin-vue_export-helper.BCo6x5W8.js";const L={class:"app-container"},P=h("h3",null,"请求参数",-1),T=h("h3",null,"异常详情",-1),E=a({name:"AdminLog",inheritAttrs:!1,__name:"exceptionLog",setup(a){const E=t(!1),N=t([]),V=t(0),A=l({pageNo:1,pageSize:20}),I=t(!1),B=t(null),D=t();function H(){E.value=!0,function(a){return e({url:"/system/exceptionLog/list",method:"get",params:a})}(A).then((({data:e})=>{D.value=e.records,V.value=e.total})).finally((()=>{E.value=!1}))}function J(e){N.value=e.map((e=>e.id))}function M(){N.value?b.confirm("确认删除已选中的数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{var a;E.value=!0,(a=N.value,e({url:"/system/exceptionLog/delete",method:"delete",data:a})).then((()=>{v.success("删除成功"),H()})).finally((()=>E.value=!1))})):v.warning("请勾选删除项")}return i((()=>{H()})),(e,a)=>{const t=C,l=x,i=U,v=z,b=S,O=k,R=y,W=_,q=o("hasPerm"),F=w;return n(),r("div",L,[s(W,{shadow:"never",class:"table-container"},{header:p((()=>[m((n(),d(l,{type:"danger",disabled:0===u(N).length,onClick:a[0]||(a[0]=e=>M())},{default:p((()=>[s(t),c("批量删除")])),_:1},8,["disabled"])),[[q,["system:exceptionLog:delete"]]])])),default:p((()=>[m((n(),d(v,{ref:"dataTableRef",data:u(D),"highlight-current-row":"",stripe:"",fit:"","max-height":"600px",onSelectionChange:J},{default:p((()=>[s(i,{align:"center",type:"selection",width:"55"}),s(i,{prop:"exceptionMessage","show-overflow-tooltip":!0,align:"center",width:"600",label:"异常内容"}),s(i,{prop:"operation",align:"center",width:"200",label:"接口名"}),s(i,{prop:"ip",align:"center",width:"130",label:"IP"}),s(i,{prop:"ipSource",align:"center",width:"200",label:"IP来源"}),s(i,{prop:"username",align:"center",width:"130",label:"操作人"}),s(i,{prop:"createTime",align:"center",width:"200",label:"创建时间"}),s(i,{label:"操作",align:"center"},{default:p((e=>[s(l,{onClick:a=>{return t=e.row,B.value=t,void(I.value=!0);var t},link:"",type:"primary",size:"mini",icon:"Document"},{default:p((()=>[c("详情")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])),[[F,u(E)]]),u(V)>0?(n(),d(b,{key:0,total:u(V),"onUpdate:total":a[1]||(a[1]=e=>g(V)?V.value=e:null),page:u(A).pageNo,"onUpdate:page":a[2]||(a[2]=e=>u(A).pageNo=e),limit:u(A).pageSize,"onUpdate:limit":a[3]||(a[3]=e=>u(A).pageSize=e),onPagination:H},null,8,["total","page","limit"])):f("",!0),s(R,{title:"异常详情",modelValue:u(I),"onUpdate:modelValue":a[4]||(a[4]=e=>g(I)?I.value=e:null)},{default:p((()=>[P,h("span",null,j(u(B).params),1),T,s(O,{height:"400px"},{default:p((()=>[h("span",null,j(u(B).exceptionJson)+"}",1)])),_:1})])),_:1},8,["modelValue"])])),_:1})])}}});export{E as default};
