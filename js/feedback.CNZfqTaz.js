import{b9 as e,d as a,r as t,S as l,o as s,b8 as i,c as o,e as r,l as n,Y as d,w as p,g as c,W as m,m as u,a1 as f,Z as g,aQ as h,ay as y,aH as b,a0 as k}from"./index.DFlZ7dGX.js";import{v as _}from"./el-loading.BOBKTW-k.js";import{E as j}from"./el-card.Dj7EVyEg.js";import{_ as v}from"./index.DwHzaXmp.js";import{E as w,a as x}from"./el-table-column.DgIaeydT.js";import"./el-checkbox.Cb3CS4F9.js";import"./el-tooltip.l0sNRNKZ.js";import"./el-scrollbar.BqHqCfk1.js";/* empty css               */import{_ as C}from"./delete.FdViYtDV.js";import{E as U,a as E}from"./el-form.C0ylLLBZ.js";import"./el-form-item.l0sNRNKZ.js";import{E as z,a as S}from"./el-select.U5XiPPVH.js";import{E as T}from"./index.BYRgmhlv.js";import"./isEqual.BQua4RH1.js";import"./_initCloneObject.CKZeNbwV.js";import"./_plugin-vue_export-helper.BCo6x5W8.js";import"./_baseIteratee.Cz-MSM4w.js";import"./index.UFisVe2j.js";import"./isUndefined.DgmxjSXK.js";import"./castArray.BOetU48W.js";import"./strings.Crw7MV9D.js";const A={class:"app-container"},N={class:"search-container"},V=a({name:"AdminLog",inheritAttrs:!1,__name:"feedback",setup(a){const V=t(!1),B=t([]),P=t(0),R=t(U),q=l({pageNo:1,pageSize:10}),D=t();function F(){V.value=!0,function(a){return e({url:"/system/feedback/list",method:"get",params:a})}(q).then((({data:e})=>{D.value=e.records,P.value=e.total})).finally((()=>{V.value=!1}))}function H(e){B.value=e.map((e=>e.id))}function O(a){const l=t([]);a&&l.value.push(a),B.value.length&&(l.value=B.value),l?b.confirm("确认删除已选中的数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{var a;V.value=!0,(a=l.value,e({url:"/system/feedback/delete",method:"delete",data:a})).then((()=>{y.success("删除成功"),F()})).finally((()=>V.value=!1))})):y.warning("请勾选删除项")}function W(a){var t;(t={id:a,status:1},e({url:"/system/feedback/update",method:"put",data:t})).then((e=>{y.success("操作成功"),F()}))}return s((()=>{F()})),(e,a)=>{const t=z,l=S,s=E,y=U,b=C,I=k,J=w,L=T,Q=x,Y=v,Z=j,G=i("hasPerm"),K=_;return o(),r("div",A,[n("div",N,[d(y,{ref_key:"queryFormRef",ref:R,model:c(q),inline:!0},{default:p((()=>[d(s,{prop:"keywords",label:"用户名称"},{default:p((()=>[d(l,{modelValue:c(q).type,"onUpdate:modelValue":a[0]||(a[0]=e=>c(q).type=e),placeholder:"选择反馈类型",style:{width:"240px"},onChange:F,clearable:""},{default:p((()=>[d(t,{label:"需求",value:1}),d(t,{label:"反馈",value:2})])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model"])]),d(Z,{shadow:"never",class:"table-container"},{header:p((()=>[m((o(),u(I,{type:"danger",disabled:0===c(B).length,onClick:O},{default:p((()=>[d(b),f("批量删除")])),_:1},8,["disabled"])),[[G,["system:feedback:delete"]]])])),default:p((()=>[m((o(),u(Q,{ref:"dataTableRef",data:c(D),"highlight-current-row":"",stripe:"",fit:"","max-height":"600px",onSelectionChange:H},{default:p((()=>[d(J,{type:"selection",align:"center"}),d(J,{prop:"type",align:"center",width:"100",label:"反馈类型"},{default:p((e=>[1===e.row.type?(o(),u(L,{key:0,type:"success"},{default:p((()=>[f("需求")])),_:1})):(o(),u(L,{key:1,type:"danger"},{default:p((()=>[f("缺陷")])),_:1}))])),_:1}),d(J,{prop:"title",align:"center",width:"250",label:"需求标题"}),d(J,{prop:"content",align:"center",label:"详细内容"}),d(J,{prop:"imgUrl",width:"160",align:"center",label:"附加图片"}),d(J,{prop:"status",align:"center",width:"160",label:"状态"},{default:p((e=>[1===e.row.status?(o(),u(L,{key:0,type:"success"},{default:p((()=>[f("解决")])),_:1})):(o(),u(L,{key:1,type:"danger"},{default:p((()=>[f("未解决")])),_:1}))])),_:1}),d(J,{prop:"createTime",width:"160",align:"center",label:"反馈时间"}),d(J,{align:"center",label:"操作",width:"160","class-name":"small-padding fixed-width"},{default:p((e=>[0==e.row.status?m((o(),u(I,{key:0,link:"",type:"success",size:"small",onClick:a=>W(e.row.id),icon:"Check"},{default:p((()=>[f("解决 ")])),_:2},1032,["onClick"])),[[G,["system:feedback:update"]]]):g("",!0),m((o(),u(I,{link:"",type:"danger",onClick:a=>O(e.row.id),icon:"Delete",size:"small"},{default:p((()=>[f("删除")])),_:2},1032,["onClick"])),[[G,["system:feedback:delete"]]])])),_:1})])),_:1},8,["data"])),[[K,c(V)]]),c(P)>0?(o(),u(Y,{key:0,total:c(P),"onUpdate:total":a[1]||(a[1]=e=>h(P)?P.value=e:null),page:c(q).pageNo,"onUpdate:page":a[2]||(a[2]=e=>c(q).pageNo=e),limit:c(q).pageSize,"onUpdate:limit":a[3]||(a[3]=e=>c(q).pageSize=e),onPagination:F},null,8,["total","page","limit"])):g("",!0)])),_:1})])}}});export{V as default};
