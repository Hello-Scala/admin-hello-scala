import{b9 as e,d as a,r as t,S as l,o,b8 as s,c as r,e as n,Y as i,w as p,W as d,m,g as u,a1 as c,l as f,t as g,Z as y,aQ as h,ay as w,aH as _,a0 as b}from"./index.V7TsgTEq.js";import{v as j}from"./el-loading.CUKFIxyY.js";import{E as v}from"./el-card.BJ4uZ2ka.js";import{_ as x}from"./index.DDhQ4iwa.js";import{E,a as T}from"./el-table-column.BFVhfB4m.js";import"./el-checkbox.CWpy68J6.js";import"./el-tooltip.l0sNRNKZ.js";import{a as P}from"./el-scrollbar.Dfe8YXkA.js";/* empty css               */import{a as U,E as k}from"./el-form.DDV5Rp5a.js";import{E as L}from"./el-row.DBATjGvD.js";import"./el-form-item.l0sNRNKZ.js";import{_ as S}from"./delete.BIGVJTzd.js";import{E as N}from"./index.CoRC1ks8.js";import"./el-select.C7IgsXi3.js";import"./strings.Bv4Mk_5L.js";import"./isEqual.D_Din47F.js";import"./_initCloneObject.BGweDbMt.js";import"./_baseIteratee.Br-040dN.js";import"./index.Dr-8d26T.js";import"./castArray.BrIbwm_9.js";import"./_plugin-vue_export-helper.BCo6x5W8.js";import"./isUndefined.DgmxjSXK.js";const A={class:"app-container"},q=a({name:"AdminLog",inheritAttrs:!1,__name:"adminLog",setup(a){const q=t(!1),z=t([]),B=t(0),C=l({pageNo:1,pageSize:20}),I=t();function O(){q.value=!0,function(a){return e({url:"/system/adminLog/list",method:"get",params:a})}(C).then((({data:e})=>{I.value=e.records,B.value=e.total})).finally((()=>{q.value=!1}))}function D(e){z.value=e.map((e=>e.id))}function H(){z.value?_.confirm("确认删除已选中的数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{var a;q.value=!0,(a=z.value,e({url:"/system/adminLog/delete",method:"delete",data:a})).then((()=>{w.success("删除成功"),O()})).finally((()=>q.value=!1))})):w.warning("请勾选删除项")}return o((()=>{O()})),(e,a)=>{const t=S,l=b,o=U,w=L,_=k,J=P,R=E,W=N,Y=T,F=x,G=v,Q=s("hasPerm"),V=j;return r(),n("div",A,[i(G,{shadow:"never",class:"table-container"},{header:p((()=>[d((r(),m(l,{type:"danger",disabled:0===u(z).length,onClick:a[0]||(a[0]=e=>H())},{default:p((()=>[i(t),c("批量删除")])),_:1},8,["disabled"])),[[Q,["system:adminLog:delete"]]])])),default:p((()=>[d((r(),m(Y,{ref:"dataTableRef",data:u(I),"highlight-current-row":"",stripe:"",fit:"","max-height":"600px",onSelectionChange:D},{default:p((()=>[i(R,{type:"expand"},{default:p((e=>[i(J,{"max-height":"400px"},{default:p((()=>[i(_,{"label-position":"left",inline:"",class:"demo-table-expand"},{default:p((()=>[i(w,null,{default:p((()=>[i(o,{label:"请求接口"},{default:p((()=>[f("span",null,g(e.row.classPath+e.row.requestUrl),1)])),_:2},1024)])),_:2},1024),i(w,null,{default:p((()=>[i(o,{label:"请求参数"},{default:p((()=>[f("span",null,g(e.row.paramsJson),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:1}),i(R,{align:"center",type:"selection",width:"55"}),i(R,{prop:"username",align:"center",width:"100",label:"操作人"}),i(R,{prop:"requestUrl",align:"center",width:"250",label:"请求接口"}),i(R,{prop:"type",align:"center",width:"100",label:"请求方式"},{scope:p((()=>["POST"===e.scope.row.type?(r(),m(W,{key:0,type:"success"},{default:p((()=>[c(g(e.scope.row.type),1)])),_:1})):y("",!0),"DELETE"===e.scope.row.type?(r(),m(W,{key:1,type:"danger"},{default:p((()=>[c(g(e.scope.row.type),1)])),_:1})):y("",!0),"GET"===e.scope.row.type?(r(),m(W,{key:2},{default:p((()=>[c(g(e.scope.row.type),1)])),_:1})):y("",!0),"PUT"===e.scope.row.type?(r(),m(W,{key:3,type:"warning"},{default:p((()=>[c(g(e.scope.row.type),1)])),_:1})):y("",!0)])),_:1}),i(R,{prop:"operationName",align:"center",label:"接口名"}),i(R,{prop:"ip",width:"200",align:"center",label:"IP"}),i(R,{prop:"source",align:"center",label:"IP来源"}),i(R,{align:"center",label:"请求耗时",width:"150"},{default:p((e=>[f("span",null,[i(W,{type:"info"},{default:p((()=>[c(g(e.row.spendTime)+" ms",1)])),_:2},1024)])])),_:1}),i(R,{prop:"createTime",align:"center",width:"200",label:"创建时间"})])),_:1},8,["data"])),[[V,u(q)]]),u(B)>0?(r(),m(F,{key:0,total:u(B),"onUpdate:total":a[1]||(a[1]=e=>h(B)?B.value=e:null),page:u(C).pageNo,"onUpdate:page":a[2]||(a[2]=e=>u(C).pageNo=e),limit:u(C).pageSize,"onUpdate:limit":a[3]||(a[3]=e=>u(C).pageSize=e),onPagination:O},null,8,["total","page","limit"])):y("",!0)])),_:1})])}}});export{q as default};
