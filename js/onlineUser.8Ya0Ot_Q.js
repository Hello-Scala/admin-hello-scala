import{b9 as e,d as a,r as t,S as l,o as r,b8 as o,c as s,e as i,l as n,Y as p,w as m,g as c,X as u,a1 as d,W as f,m as g,aQ as j,Z as b,aH as h,ay as k,$ as y,a0 as _}from"./index.V7TsgTEq.js";import{v}from"./el-loading.CUKFIxyY.js";import{E as w}from"./el-card.BJ4uZ2ka.js";import{_ as x}from"./index.DDhQ4iwa.js";import{E as U,a as z}from"./el-table-column.BFVhfB4m.js";import"./el-checkbox.CWpy68J6.js";import"./el-tooltip.l0sNRNKZ.js";import"./el-scrollbar.Dfe8YXkA.js";/* empty css               */import{E as C}from"./el-avatar.DqcaLef4.js";import{E,a as N}from"./el-form.DDV5Rp5a.js";import{_ as T,a as V}from"./search.CXprqqln.js";import"./el-form-item.l0sNRNKZ.js";import"./el-select.C7IgsXi3.js";import"./index.CoRC1ks8.js";import"./strings.Bv4Mk_5L.js";import"./isEqual.D_Din47F.js";import"./_initCloneObject.BGweDbMt.js";import"./_baseIteratee.Br-040dN.js";import"./index.Dr-8d26T.js";import"./castArray.BrIbwm_9.js";import"./_plugin-vue_export-helper.BCo6x5W8.js";import"./isUndefined.DgmxjSXK.js";const A={class:"app-container"},P={class:"search-container"},S={class:"block"},B=a({name:"AdminLog",inheritAttrs:!1,__name:"onlineUser",setup(a){const B=t(!1),F=t(0),R=t(E),q=l({pageNo:1,pageSize:10}),D=t();function H(){B.value=!0,function(a){return e({url:"/system/user/online",method:"get",params:a})}(q).then((({data:e})=>{D.value=e.records,F.value=e.total})).finally((()=>{B.value=!1}))}function I(){R.value.resetFields(),q.pageNo=1,H()}function O(a){h.confirm("确认将该账号强制下线?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{var t;B.value=!0,(t=a,e({url:"/system/user/kick",method:"get",params:{token:t}})).then((()=>{k.success("操作成功"),H()})).finally((()=>B.value=!1))}))}return r((()=>{H()})),(e,a)=>{const t=y,l=N,r=T,h=_,k=V,W=E,J=C,K=U,L=z,Q=x,X=w,Y=o("hasPerm"),Z=v;return s(),i("div",A,[n("div",P,[p(W,{ref_key:"queryFormRef",ref:R,model:c(q),inline:!0},{default:m((()=>[p(l,{prop:"keywords",label:"用户名称"},{default:m((()=>[p(t,{modelValue:c(q).keywords,"onUpdate:modelValue":a[0]||(a[0]=e=>c(q).keywords=e),placeholder:"用户名称",clearable:"",onKeyup:u(H,["enter"])},null,8,["modelValue"])])),_:1}),p(l,null,{default:m((()=>[p(h,{type:"primary",onClick:H},{default:m((()=>[p(r),d("搜索")])),_:1}),p(h,{onClick:I},{default:m((()=>[p(k),d("重置")])),_:1})])),_:1})])),_:1},8,["model"])]),p(X,{shadow:"never",class:"table-container"},{default:m((()=>[f((s(),g(L,{ref:"dataTableRef",data:c(D),"highlight-current-row":"",stripe:"",fit:""},{default:m((()=>[p(K,{align:"center",prop:"avatar",label:"头像",width:"180"},{default:m((e=>[n("div",S,[p(J,{size:50,src:e.row.avatar},null,8,["src"])])])),_:1}),p(K,{align:"center",prop:"nickname",label:"昵称",width:"180"}),p(K,{align:"center",prop:"ip",label:"IP地址"}),p(K,{align:"center",prop:"city",label:"登录地址"}),p(K,{align:"center",prop:"browser",label:"浏览器"}),p(K,{align:"center",prop:"os",label:"操作系统"}),p(K,{align:"center",prop:"loginTime",label:"登录时间",width:"180"}),p(K,{align:"center",label:"操作"},{default:m((e=>[f((s(),g(h,{type:"danger",link:"",onClick:a=>O(e.row.tokenValue),size:"small",icon:"Delete"},{default:m((()=>[d("强制下线")])),_:2},1032,["onClick"])),[[Y,["system:user:kick"]]])])),_:1})])),_:1},8,["data"])),[[Z,c(B)]]),c(F)>0?(s(),g(Q,{key:0,total:c(F),"onUpdate:total":a[1]||(a[1]=e=>j(F)?F.value=e:null),page:c(q).pageNo,"onUpdate:page":a[2]||(a[2]=e=>c(q).pageNo=e),limit:c(q).pageSize,"onUpdate:limit":a[3]||(a[3]=e=>c(q).pageSize=e),onPagination:H},null,8,["total","page","limit"])):b("",!0)])),_:1})])}}});export{B as default};
