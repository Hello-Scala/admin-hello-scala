import{b9 as e,d as a,r as t,S as l,o as r,b8 as s,c as o,e as i,Y as n,w as p,W as m,m as c,g as u,a1 as d,aQ as g,Z as f,ay as h,aH as j,a0 as v}from"./index.fnbw5y5k.js";import{v as b}from"./el-loading.HzdahNM-.js";import{E as y}from"./el-card.Q-ANbuzj.js";import{_}from"./index.C4t10Dr8.js";import{E as x,a as w}from"./el-table-column.DFP7xguF.js";import"./el-checkbox.BXgtrOQn.js";import"./el-tooltip.l0sNRNKZ.js";import"./el-scrollbar.BK4RbwYQ.js";/* empty css               */import{_ as k}from"./delete.H061f9X9.js";import{E as C}from"./el-form.CXzYbvvU.js";import"./el-select.iwXnlUdR.js";import"./index.BWcfXwkj.js";import"./strings.CNQDdpYl.js";import"./isEqual.A87rRtZ6.js";import"./_initCloneObject.CCC-Ul-V.js";import"./_baseIteratee.CiruAMh1.js";import"./index.DaE7Pgd4.js";import"./castArray.BfXkOhWC.js";import"./_plugin-vue_export-helper.BCo6x5W8.js";import"./isUndefined.DgmxjSXK.js";const N={class:"app-container"},S=a({name:"Resource",inheritAttrs:!1,__name:"resource",setup(a){t(C);const S=t(!1),T=t([]),U=t(0),z=l({pageNo:1,pageSize:10}),E=t();function A(){S.value=!0,function(a){return e({url:"/system/resource/list",method:"get",params:a})}(z).then((({data:e})=>{E.value=e.records,U.value=e.total})).finally((()=>{S.value=!1}))}function P(e){T.value=e.map((e=>e.id))}function R(a){const l=t([]);a&&l.value.push(a),T.value.length&&(l.value=T.value),l?j.confirm("确认删除已选中的数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{var a;S.value=!0,(a=l.value,e({url:"/system/resource/delete",method:"delete",data:a})).then((()=>{h.success("删除成功"),z.pageNo=1,A()})).finally((()=>S.value=!1))})):h.warning("请勾选删除项")}return r((()=>{A()})),(e,a)=>{const t=k,l=v,r=x,h=w,j=_,C=y,B=s("hasPerm"),H=b;return o(),i("div",N,[n(C,{shadow:"never",class:"table-container"},{header:p((()=>[m((o(),c(l,{type:"danger",disabled:0===u(T).length,onClick:a[0]||(a[0]=e=>R())},{default:p((()=>[n(t),d("批量删除")])),_:1},8,["disabled"])),[[B,["system:resource:delete"]]])])),default:p((()=>[m((o(),c(h,{ref:"dataTableRef",data:u(E),"highlight-current-row":"",stripe:"",fit:"","max-height":"600px",onSelectionChange:P},{default:p((()=>[n(r,{type:"selection",width:"55",align:"center"}),n(r,{label:"文件地址",align:"center",prop:"url","show-overflow-tooltip":!0}),n(r,{label:"文件类型",align:"center",prop:"type"}),n(r,{label:"存储平台",align:"center",prop:"platform"}),n(r,{label:"创建时间",align:"center",prop:"createTime"}),n(r,{fixed:"right",align:"center",label:"操作",width:"220"},{default:p((e=>[m((o(),c(l,{type:"danger",link:"",size:"small",onClick:a=>R(e.row.id)},{default:p((()=>[n(t),d("删除 ")])),_:2},1032,["onClick"])),[[B,["system:resource:delete"]]])])),_:1})])),_:1},8,["data"])),[[H,u(S)]]),u(U)>0?(o(),c(j,{key:0,total:u(U),"onUpdate:total":a[1]||(a[1]=e=>g(U)?U.value=e:null),page:u(z).pageNo,"onUpdate:page":a[2]||(a[2]=e=>u(z).pageNo=e),limit:u(z).pageSize,"onUpdate:limit":a[3]||(a[3]=e=>u(z).pageSize=e),onPagination:A},null,8,["total","page","limit"])):f("",!0)])),_:1})])}}});export{S as default};
