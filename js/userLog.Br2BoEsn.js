import{b9 as e,d as a,r as t,S as l,o as s,b8 as r,c as i,e as o,Y as n,w as p,W as c,m,g as d,a1 as u,l as g,t as b,aQ as f,Z as h,ay as j,aH as v,a0 as y}from"./index.C9nAUyKp.js";import{v as _}from"./el-loading.D8Cs_H2b.js";import{E as w}from"./el-card.CLkFMZ8T.js";import{_ as x}from"./index.CselIaHa.js";import{E as T,a as L}from"./el-table-column.Us6Wh2kI.js";import"./el-checkbox.ClyUCCcZ.js";import"./el-tooltip.l0sNRNKZ.js";import"./el-scrollbar.C16Zp6J7.js";/* empty css               */import{_ as P}from"./delete.B0lRh9SD.js";import"./el-select.BNJwVlU-.js";import"./index.DJpnjUD8.js";import"./strings.If0QXNkj.js";import"./isEqual.CxS2QHO6.js";import"./_initCloneObject.C6tk3cZf.js";import"./_baseIteratee.CBi7GCj4.js";import"./index.5TzgbSnb.js";import"./castArray.BpNHvUBt.js";import"./_plugin-vue_export-helper.BCo6x5W8.js";import"./isUndefined.DgmxjSXK.js";const S={class:"app-container"},U=a({name:"AdminLog",inheritAttrs:!1,__name:"userLog",setup(a){const U=t(!1),N=t([]),k=t(0),z=l({pageNo:1,pageSize:20}),A=t();function C(){U.value=!0,function(a){return e({url:"/system/userLog/list",method:"get",params:a})}(z).then((({data:e})=>{A.value=e.records,k.value=e.total})).finally((()=>{U.value=!1}))}function E(e){N.value=e.map((e=>e.id))}function I(){N.value?v.confirm("确认删除已选中的数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{var a;U.value=!0,(a=N.value,e({url:"/system/userLog/delete",method:"delete",data:a})).then((()=>{j.success("删除成功"),C()})).finally((()=>U.value=!1))})):j.warning("请勾选删除项")}return s((()=>{C()})),(e,a)=>{const t=P,l=y,s=T,j=L,v=x,O=w,B=r("hasPerm"),H=_;return i(),o("div",S,[n(O,{shadow:"never",class:"table-container"},{header:p((()=>[c((i(),m(l,{type:"danger",disabled:0===d(N).length,onClick:a[0]||(a[0]=e=>I())},{default:p((()=>[n(t),u("批量删除")])),_:1},8,["disabled"])),[[B,["system:userLog:delete"]]])])),default:p((()=>[c((i(),m(j,{ref:"dataTableRef",data:d(A),"highlight-current-row":"",stripe:"",fit:"","max-height":"600px",onSelectionChange:E},{default:p((()=>[n(s,{align:"center",type:"selection",width:"55"}),n(s,{prop:"ip",align:"center",width:"130",label:"IP"}),n(s,{prop:"address",align:"center",width:"200",label:"IP来源"}),n(s,{prop:"accessOs",align:"center",label:"平台"}),n(s,{prop:"browser",align:"center",label:"浏览器"}),n(s,{prop:"type",align:"center",label:"操作类型"}),n(s,{prop:"description",align:"center",label:"操作日志"}),n(s,{prop:"model",align:"center",label:"操作模块"}),n(s,{prop:"result",align:"center",label:"操作结果"}),n(s,{prop:"createTime",align:"center",width:"200",sortable:"",label:"操作时间"},{scope:p((()=>[g("span",null,b(e.scope.row.createTime),1)])),_:1})])),_:1},8,["data"])),[[H,d(U)]]),d(k)>0?(i(),m(v,{key:0,total:d(k),"onUpdate:total":a[1]||(a[1]=e=>f(k)?k.value=e:null),page:d(z).pageNo,"onUpdate:page":a[2]||(a[2]=e=>d(z).pageNo=e),limit:d(z).pageSize,"onUpdate:limit":a[3]||(a[3]=e=>d(z).pageSize=e),onPagination:C},null,8,["total","page","limit"])):h("",!0)])),_:1})])}}});export{U as default};
